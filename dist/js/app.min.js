!function(){"use strict";var t=Stapes.subclass({constructor:function(t){this.scope={},CoreLibrary.init().then(function(t){this.scope.args={title:"Football - Team Performance Indicator",eventId:"1002788429"},Object.keys(t).forEach(function(a){this.scope.args[a]=t[a]}.bind(this)),CoreLibrary.widgetModule.enableWidgetTransition(!0);var a;a=null==CoreLibrary.pageInfo.pageParam||isNaN(parseInt(CoreLibrary.pageInfo.pageParam,10))?this.scope.args.eventId:CoreLibrary.pageInfo.pageParam,CoreLibrary.statisticsModule.getStatistics("tpi","event/"+a+"/").then(function(t){this.scope.teams=[],this.scope.teams.push({name:t.homeParticipant.participantName,detailed:!1,lastEvents:this.parseLastEvents(t.homeParticipant.participantId,t.homeParticipant.lastEvents)}),this.scope.teams.push({name:t.awayParticipant.participantName,detailed:!1,lastEvents:this.parseLastEvents(t.awayParticipant.participantId,t.awayParticipant.lastEvents)}),this.scope.teams.forEach(function(t){sightglass(t,"detailed",this.adjustHeight.bind(this))}.bind(this)),this.adjustHeight()}.bind(this))["catch"](function(t){CoreLibrary.widgetModule.removeWidget()})}.bind(this))["catch"](function(t){}),this.view=rivets.bind(document.getElementById("main"),this.scope),this.view.binders["box-css-class"]=function(t,a){t.classList.add("kw-match-"+a)}},parseLastEvents:function(t,a){var e=[];return a.forEach(function(a){if(a.homeParticipant&&a.awayParticipant&&a.scores&&a.scores.length>0){var i="win";a.scores[0].homeScore===a.scores[0].awayScore?i="draw":a.homeParticipant.participantId===t&&a.scores[0].awayScore>a.scores[0].homeScore?i="lose":a.awayParticipant.participantId===t&&a.scores[0].homeScore>a.scores[0].awayScore&&(i="lose"),e.push({homeName:a.homeParticipant.participantName,awayName:a.awayParticipant.participantName,homeScore:a.scores[0].homeScore,awayScore:a.scores[0].awayScore,result:i})}}),e},adjustHeight:function(){var t=40,a=85,e=45,i=t;this.scope.teams.forEach(function(t){i+=t.detailed?a+t.lastEvents.length*e:a}),CoreLibrary.widgetModule.setWidgetHeight(i+1)}});new t}();