!function(){"use strict";var t=function(t,e){var n={id:t.id,date:t.date,inHome:t.homeTeam===e,homeTeam:t.homeTeam,awayTeam:t.awayTeam,homeScore:t.result.homeScore,awayScore:t.result.awayScore,result:"lose"},i=n.date,o=i.getUTCDate()+"";1===o.length&&(o="0"+o);var a=i.getUTCMonth()+1+"";1===a.length&&(a="0"+a),n.dateText=o+"/"+a+"/"+i.getUTCFullYear();var s=t.result;return n.inHome?(n.teamScore=s.homeScore,n.opponentScore=s.awayScore,n.opponentName=t.awayTeam):(n.teamScore=s.awayScore,n.opponentScore=s.homeScore,n.opponentName=t.homeTeam),s.homeScore===s.awayScore?n.result="draw":(n.inHome&&s.homeScore>s.awayScore||!n.inHome&&s.awayScore>s.homeScore)&&(n.result="win"),n.tooltipText="vs "+n.opponentName+" - "+n.teamScore+"x"+n.opponentScore,n},e=function(t,e,n){if(t.length>=n)return!1;var i=t.filter(function(t){return e.id===t.id}).length>0;return!i},n=function(t){var e=0;return t.forEach(function(t){"win"===t.result?e+=20:"draw"===t.result&&(e+=10)}),e/(20*t.length)},i=function(i,o){var a=[];return i.forEach(function(i){var s=[],r=[],c=[];i.matchHistory.forEach(function(t,e){t.date=new Date(t.date)}),i.matchHistory.sort(function(t,e){return t.date.getTime()>e.date.getTime()?1:-1}),i.matchHistory.forEach(function(n,a){var u=t(n,i.name);e(s,u,o)&&s.push(u),u.inHome&&e(r,u,o)&&r.push(u),!u.inHome&&e(c,u,o)&&c.push(u)}),a.push({name:i.name,performance:n(s),detailed:!1,matchHistory:s,matchHistoryHome:r,matchHistoryAway:c})}),a},o=Stapes.subclass({constructor:function(t){this.scope={},CoreLibrary.init().then(function(t){this.scope.args=Object.assign({title:"Football - Team Performance Indicator",numberMatchesPerTeam:6,listLimit:3},t.arguments),CoreLibrary.getData("mockdata.json").then(function(t){this.scope.teams=i(t.tournaments[0].teams,this.scope.numberMatchesPerTeam)}.bind(this))}.bind(this)),this.view=rivets.bind(document.getElementById("main"),this.scope),this.view.binders["box-css-class"]=this.boxCssClass},boxCssClass:function(t,e){t.classList.add("kw-match-"+e)}});new o}(),window.CoreLibrary=function(){"use strict";function t(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function e(t){return t.json()}var n={};return rivets.formatters.translate=function(t){return null!=n[t]?n[t]:t},{widgetModule:null,offeringModule:null,statisticsModule:null,config:{oddsFormat:"decimal",apiVersion:"v2",streamingAllowedForPlayer:!1},height:450,pageInfo:{},init:function(n){return new Promise(function(i,o){window.KambiWidget?window.self===window.top?fetch("mockSetupData.json").then(t).then(e).then(function(t){this.applySetupData(t,n),this.fetchTranslations(this.config.clientConfig.locale).then(function(){i(this.config)}.bind(this))}.bind(this))["catch"](function(t){o()}):(window.KambiWidget.apiReady=function(t){this.widgetModule.api=t,this.requestSetup(function(t){this.applySetupData(t,n),this.fetchTranslations(this.config.arguments.clientConfig.locale).then(function(){i(this.config.arguments)}.bind(this))}.bind(this))}.bind(this),window.KambiWidget.receiveResponse=function(t){this.widgetModule.handleResponse(t)}.bind(this)):o()}.bind(this))},fetchTranslations:function(t){null==t&&(t="en_GB");var e=this,i=new Promise(function(i,o){e.getData("i18n/"+t+".json").then(function(t){n=t,i()})["catch"](function(n){"en_GB"!==t?e.fetchTranslations("en_GB").then(i)["catch"](function(t){i()}):i()})});return i},applySetupData:function(t,e){null!=t.clientConfig.oddsFormat&&this.setOddsFormat(t.clientConfig.oddsFormat),this.offeringModule.setConfig(t.clientConfig),this.widgetModule.setConfig(t.clientConfig),this.setPageInfo(t.pageInfo),null!=t.arguments&&t.arguments.hasOwnProperty("offering")&&this.offeringModule.setOffering(t.arguments.offering),e===!0&&this.setHeight(t.height),this.config=t},requestSetup:function(t){this.widgetModule.requestSetup(t)},receiveRespone:function(t){},setOddsFormat:function(t){this.config.oddsFormat=t},setHeight:function(t){this.height=t,this.widgetModule.setHeight(t)},setPageInfo:function(t){"filter"===t.pageType&&"/"!==t.pageParam.substr(-1)&&(t.pageParam+="/"),this.pageInfo=t},getData:function(n){return fetch(n).then(t).then(e)}}}(),CoreLibrary.offeringModule=function(){"use strict";return{config:{apiBaseUrl:null,apiUrl:null,channelId:null,currency:null,locale:null,market:null,offering:null,clientId:null,version:null,routeRoot:"",auth:!1,device:null},setConfig:function(t){for(var e in t)if(t.hasOwnProperty(e)&&this.config.hasOwnProperty(e))switch(this.config[e]=t[e],e){case"locale":}},setOffering:function(t){this.config.offering=t}}}(),CoreLibrary.statisticsModule=function(){"use strict";return{getStatistics:function(t,e){e=e.match(/[^?]*/)[0],e=e.slice(0,-1);var n="https://api.kambi.com/statistics/api/";return CoreLibrary.getData(n+CoreLibrary.config.offering+"/"+t+"/"+e+".json")}}}(),CoreLibrary.widgetModule=function(){"use strict";return{api:null,config:{routeRoot:"",auth:!1,device:null},setConfig:function(t){for(var e in t)t.hasOwnProperty(e)&&this.config.hasOwnProperty(e)&&(this.config[e]=t[e]);null==this.config.routeRoot?this.config.routeRoot="":this.config.routeRoot.length>0&&"/"!==this.config.routeRoot.slice(-1)&&(this.config.routeRoot+="/")},handleResponse:function(t){switch(t.type){case this.api.WIDGET_HEIGHT:break;case this.api.BETSLIP_OUTCOMES:break;case this.api.WIDGET_ARGS:break;case this.api.PAGE_INFO:break;case this.api.CLIENT_ODDS_FORMAT:break;case this.api.CLIENT_CONFIG:break;case this.api.USER_LOGGED_IN:break;case"Setup":}},requestSetup:function(t){this.api.requestSetup(t)}}}();