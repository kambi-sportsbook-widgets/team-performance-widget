(function(){var e;e=["widgetCore","widgetCore.translate","ngAnimate"],function(e){"use strict";return e}(angular.module("teamPerformanceWidget",e))}).call(this),function(){"use strict";var e=function(e,t){var a={id:e.id,date:e.date,inHome:e.homeTeam===t,homeTeam:e.homeTeam,awayTeam:e.awayTeam,homeScore:e.result.homeScore,awayScore:e.result.awayScore,result:"lose"},r=a.date,o=r.getUTCDate()+"";1===o.length&&(o="0"+o);var n=r.getUTCMonth()+1+"";1===n.length&&(n="0"+n),a.dateText=o+"/"+n+"/"+r.getUTCFullYear();var i=e.result;return a.inHome?(a.teamScore=i.homeScore,a.opponentScore=i.awayScore,a.opponentName=e.awayTeam):(a.teamScore=i.awayScore,a.opponentScore=i.homeScore,a.opponentName=e.homeTeam),i.homeScore===i.awayScore?a.result="draw":(a.inHome&&i.homeScore>i.awayScore||!a.inHome&&i.awayScore>i.homeScore)&&(a.result="win"),a.tooltipText="vs "+a.opponentName+" - "+a.teamScore+"x"+a.opponentScore,a},t=function(e,t,a){if(e.length>=a)return!1;var r=_.find(e,function(e){return t.id===e.id});return null==r},a=function(e){var t=0;return e.forEach(function(e){"win"===e.result?t+=20:"draw"===e.result&&(t+=10)}),t/(20*e.length)},r=function(r,o){var n=[];return r.forEach(function(r){var i=[],m=[],c=[];r.matchHistory.forEach(function(e,t){e.date=new Date(e.date)}),r.matchHistory.sort(function(e,t){return e.date.getTime()>t.date.getTime()?1:-1}),r.matchHistory.forEach(function(a,n){var s=e(a,r.name);t(i,s,o)&&i.push(s),s.inHome&&t(m,s,o)&&m.push(s),!s.inHome&&t(c,s,o)&&c.push(s)}),n.push({name:r.name,performance:a(i),detailed:!1,matchHistory:i,matchHistoryHome:m,matchHistoryAway:c})}),n},o=angular.module("teamPerformanceWidget");o.controller("appController",["$scope","$controller","$http","$sce","kambiAPIService","kambiWidgetService",function(e,t,a,o,n,i){angular.extend(this,t("widgetCoreController",{$scope:e})),e.defaultArgs={title:"Football - Team Performance Indicator",numberMatchesPerTeam:6,listLimit:3},e.Math=window.Math,e.startFrom=0,e.teams=[],e.adjustHeight=function(){for(var t=40,a=40,r=16,o=201,n=o+460,i=t+a+r+1,m=e.teams,c=e.startFrom;c<e.startFrom+e.args.listLimit&&c<m.length;)i+=m[c].detailed?n:o,c++;e.setWidgetHeight(i)},e.init().then(function(){a({method:"GET",url:"./mockdata.json"}).then(function(t){var a=t.data.tournaments[0].teams,o=r(a,e.args.numberMatchesPerTeam);e.teams=o,e.setPages(e.teams,e.args.listLimit),e.adjustHeight()})})}])}($);