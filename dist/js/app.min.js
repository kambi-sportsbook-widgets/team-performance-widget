!function(){"use strict";var t=function(t,e){var i={id:t.id,date:t.date,inHome:t.homeTeam===e,homeTeam:t.homeTeam,awayTeam:t.awayTeam,homeScore:t.result.homeScore,awayScore:t.result.awayScore,result:"lose"},n=i.date,o=n.getUTCDate()+"";1===o.length&&(o="0"+o);var s=n.getUTCMonth()+1+"";1===s.length&&(s="0"+s),i.dateText=o+"/"+s+"/"+n.getUTCFullYear();var a=t.result;return i.inHome?(i.teamScore=a.homeScore,i.opponentScore=a.awayScore,i.opponentName=t.awayTeam):(i.teamScore=a.awayScore,i.opponentScore=a.homeScore,i.opponentName=t.homeTeam),a.homeScore===a.awayScore?i.result="draw":(i.inHome&&a.homeScore>a.awayScore||!i.inHome&&a.awayScore>a.homeScore)&&(i.result="win"),i.tooltipText="vs "+i.opponentName+" - "+i.teamScore+"x"+i.opponentScore,i},e=function(t,e,i){if(t.length>=i)return!1;var n=t.filter(function(t){return e.id===t.id}).length>0;return!n},i=function(t){var e=0;return t.forEach(function(t){"win"===t.result?e+=20:"draw"===t.result&&(e+=10)}),e/(20*t.length)},n=function(n,o){var s=[];return n.forEach(function(n){var a=[],r=[],u=[];n.matchHistory.forEach(function(t,e){t.date=new Date(t.date)}),n.matchHistory.sort(function(t,e){return t.date.getTime()>e.date.getTime()?1:-1}),n.matchHistory.forEach(function(i,s){var c=t(i,n.name);e(a,c,o)&&a.push(c),c.inHome&&e(r,c,o)&&r.push(c),!c.inHome&&e(u,c,o)&&u.push(c)}),s.push({name:n.name,performance:i(a),detailed:!1,matchHistory:a,matchHistoryHome:r,matchHistoryAway:u})}),s},o=Stapes.subclass({constructor:function(t){this.scope={},CoreLibrary.init().then(function(t){this.scope.args=Object.assign({title:"Football - Team Performance Indicator",numberMatchesPerTeam:6},t),CoreLibrary.getData("mockdata.json").then(function(t){this.scope.teams=n(t.tournaments[0].teams,this.scope.numberMatchesPerTeam),this.scope.teams.forEach(function(t){sightglass(t,"detailed",this.adjustHeight.bind(this))}.bind(this)),this.adjustHeight()}.bind(this))}.bind(this))["catch"](function(t){}),this.view=rivets.bind(document.getElementById("main"),this.scope),this.view.binders["box-css-class"]=this.boxCssClass},boxCssClass:function(t,e){t.classList.add("kw-match-"+e)},adjustHeight:function(){var t=40,e=85,i=45,n=t;this.scope.teams.forEach(function(t){n+=t.detailed?e+t.matchHistory.length*i:e}),CoreLibrary.widgetModule.setWidgetHeight(n+1)}});new o}(),window.CoreLibrary=function(){"use strict";function t(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function e(t){return t.json()}var i={};return rivets.formatters.translate=function(t){return null!=i[t]?i[t]:t},sightglass.adapters=rivets.adapters,sightglass.root=".",{widgetModule:null,offeringModule:null,statisticsModule:null,config:{oddsFormat:"decimal",apiVersion:"v2",streamingAllowedForPlayer:!1},height:450,pageInfo:{},init:function(i){return new Promise(function(n,o){window.KambiWidget?window.self===window.top?fetch("mockSetupData.json").then(t).then(e).then(function(t){this.applySetupData(t,i),this.fetchTranslations(t.clientConfig.locale).then(function(){n(t.arguments)}.bind(this))}.bind(this))["catch"](function(t){o()}):(window.KambiWidget.apiReady=function(t){this.widgetModule.api=t,this.requestSetup(function(t){this.applySetupData(t,i),this.widgetModule.requestBetslipOutcomes(),this.widgetModule.requestOddsFormat(),this.fetchTranslations(t.clientConfig.locale).then(function(){n(t.arguments)}.bind(this))}.bind(this))}.bind(this),window.KambiWidget.receiveResponse=function(t){this.widgetModule.handleResponse(t)}.bind(this)):o()}.bind(this))},fetchTranslations:function(t){null==t&&(t="en_GB");var e=this;return new Promise(function(n,o){e.getData("i18n/"+t+".json").then(function(t){i=t,n()})["catch"](function(i){"en_GB"!==t?e.fetchTranslations("en_GB").then(n)["catch"](function(t){n()}):n()})})},applySetupData:function(t,e){null!=t.clientConfig.oddsFormat&&this.setOddsFormat(t.clientConfig.oddsFormat),this.offeringModule.setConfig(t.clientConfig),this.widgetModule.setConfig(t.clientConfig),this.setPageInfo(t.pageInfo),null!=t.arguments&&t.arguments.hasOwnProperty("offering")&&this.offeringModule.setOffering(t.arguments.offering),e===!0&&this.setHeight(t.height),this.config=t},requestSetup:function(t){this.widgetModule.requestSetup(t)},receiveRespone:function(t){},setOddsFormat:function(t){this.config.oddsFormat=t},setHeight:function(t){this.height=t,this.widgetModule.setHeight(t)},setPageInfo:function(t){"filter"===t.pageType&&"/"!==t.pageParam.substr(-1)&&(t.pageParam+="/"),this.pageInfo=t},getData:function(i){return fetch(i).then(t).then(e)["catch"](function(t){})}}}(),CoreLibrary.offeringModule=function(){"use strict";return{config:{apiBaseUrl:null,apiUrl:null,channelId:null,currency:null,locale:null,market:null,offering:null,clientId:null,version:null,routeRoot:"",auth:!1,device:null},setConfig:function(t){for(var e in t)if(t.hasOwnProperty(e)&&this.config.hasOwnProperty(e))switch(this.config[e]=t[e],e){case"locale":}},setOffering:function(t){this.config.offering=t},getGroupEvents:function(t){var e="/event/group/"+t+".json";return this.doRequest(e)},getEventsByFilter:function(t,e){var i="/listView/"+t;return this.doRequest(i,e,"v3")},getLiveEvents:function(){var t="/event/live/open.json";return this.doRequest(t)},doRequest:function(t,e,i){if(null!=this.config.offering){var n=this.config.apiBaseUrl.replace("{apiVersion}",null!=i?i:this.config.version),o=n+this.config.offering+t,s=e||{},a={lang:s.locale||this.config.locale,market:s.market||this.config.market,client_id:s.clientId||this.config.clientId,include:s.include||null};return o+="?"+Object.keys(a).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(a[t])}).join("&"),CoreLibrary.getData(o)}}}}(),CoreLibrary.statisticsModule=function(){"use strict";return{getStatistics:function(t,e){e=e.match(/[^?]*/)[0],e=e.slice(0,-1);var i="https://api.kambi.com/statistics/api/";return CoreLibrary.getData(i+CoreLibrary.config.offering+"/"+t+"/"+e+".json")}}}(),CoreLibrary.widgetModule=function(){"use strict";return{api:null,config:{routeRoot:"",auth:!1,device:null},setConfig:function(t){for(var e in t)t.hasOwnProperty(e)&&this.config.hasOwnProperty(e)&&(this.config[e]=t[e]);null==this.config.routeRoot?this.config.routeRoot="":this.config.routeRoot.length>0&&"/"!==this.config.routeRoot.slice(-1)&&(this.config.routeRoot+="/")},handleResponse:function(t){switch(t.type){case this.api.WIDGET_HEIGHT:break;case this.api.BETSLIP_OUTCOMES:break;case this.api.WIDGET_ARGS:break;case this.api.PAGE_INFO:break;case this.api.CLIENT_ODDS_FORMAT:break;case this.api.CLIENT_CONFIG:break;case this.api.USER_LOGGED_IN:break;case"Setup":}},requestSetup:function(t){this.api.requestSetup(t)},requestWidgetHeight:function(){this.api.request(this.api.WIDGET_HEIGHT)},setWidgetHeight:function(t){this.api.set(this.api.WIDGET_HEIGHT,t)},enableWidgetTransition:function(t){t?this.api.set(this.api.WIDGET_ENABLE_TRANSITION):this.api.set(this.api.WIDGET_DISABLE_TRANSITION)},removeWidget:function(){this.api.remove()},navigateToLiveEvent:function(t){this.navigateClient("event/live/"+t)},navigateToEvent:function(t){this.navigateClient("event/"+t)},navigateToFilter:function(t){this.navigateClient(t)},navigateToLiveEvents:function(){this.navigateClient(["in-play"])},addOutcomeToBetslip:function(t,e,i,n){var o=[];t.isArray()?o=t:o.push(t);var s={outcomes:o};null!=e&&(e.isArray()?s.stakes=e:s.stakes=[e]),s.couponType=1===o.length?this.api.BETSLIP_OUTCOMES_ARGS.TYPE_SINGLE:this.api.BETSLIP_OUTCOMES_ARGS.TYPE_COMBINATION,s.updateMode="replace"!==i?this.api.BETSLIP_OUTCOMES_ARGS.UPDATE_APPEND:this.api.BETSLIP_OUTCOMES_ARGS.UPDATE_REPLACE,null!=n&&(s.source=n),this.api.set(this.api.BETSLIP_OUTCOMES,s)},removeOutcomeFromBetslip:function(t){var e=[];t.isArray()?e=t:e.push(t),this.api.set(this.api.BETSLIP_OUTCOMES_REMOVE,{outcomes:e})},requestBetslipOutcomes:function(){this.api.request(this.api.BETSLIP_OUTCOMES)},requestPageInfo:function(){this.api.request(api.PAGE_INFO)},requestWidgetArgs:function(){this.api.request(api.WIDGET_ARGS)},requestClientConfig:function(){this.api.request(api.CLIENT_CONFIG)},requestOddsFormat:function(){this.api.request(this.api.CLIENT_ODDS_FORMAT)},requestOddsAsAmerican:function(t){return new Promise(function(e,i){this.api.requestOddsAsAmerican(t,function(t){e(t)})}.bind(this))},requestOddsAsFractional:function(t){return new Promise(function(e,i){this.api.requestOddsAsFractional(t,function(t){e(t)})})},navigateClient:function(t){if("string"==typeof t)this.api.navigateClient("#"+this.config.routeRoot+t);else if(t.isArray()){var e=this.api.createFilterUrl(t,this.config.routeRoot);this.api.navigateClient(e)}}}}();